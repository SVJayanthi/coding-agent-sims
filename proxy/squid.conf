# Basic squid configuration for agent network proxy
http_port 3128

# Allow package manager domains
acl packagemanagers dstdomain .pypi.org
acl packagemanagers dstdomain .files.pythonhosted.org
acl packagemanagers dstdomain .registry.npmjs.org
acl packagemanagers dstdomain .github.com
acl packagemanagers dstdomain .githubusercontent.com

# Allow localhost traffic
acl localhost src 127.0.0.1/32
acl to_localhost dst 127.0.0.0/8 0.0.0.0/32

# Default rules
http_access allow localhost to_localhost
http_access allow packagemanagers
http_access deny all

# Logging
access_log /var/log/squid/access.log squid